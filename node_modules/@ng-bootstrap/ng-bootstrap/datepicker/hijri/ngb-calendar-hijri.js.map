{"version":3,"file":"ngb-calendar-hijri.js","sourceRoot":"","sources":["../../../src/datepicker/hijri/ngb-calendar-hijri.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgbDate} from '../ngb-date';\nimport {NgbPeriod, NgbCalendar} from '../ngb-calendar';\nimport {Injectable} from '@angular/core';\nimport {isNumber} from '../../util/util';\n\n@Injectable()\nexport abstract class NgbCalendarHijri extends NgbCalendar {\n  getDaysPerWeek() { return 7; }\n\n  getMonths() { return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; }\n\n  getWeeksPerMonth() { return 6; }\n\n  isValid(date: NgbDate): boolean {\n    return date && isNumber(date.year) && isNumber(date.month) && isNumber(date.day) &&\n        !isNaN(this.toGregorian(date).getTime());\n  }\n\n  setDay(date: NgbDate, day: number): NgbDate {\n    day = +day;\n    let mDays = this.getDaysInIslamicMonth(date.month, date.year);\n    if (day <= 0) {\n      while (day <= 0) {\n        date = this.setMonth(date, date.month - 1);\n        mDays = this.getDaysInIslamicMonth(date.month, date.year);\n        day += mDays;\n      }\n    } else if (day > mDays) {\n      while (day > mDays) {\n        day -= mDays;\n        date = this.setMonth(date, date.month + 1);\n        mDays = this.getDaysInIslamicMonth(date.month, date.year);\n      }\n    }\n    date.day = day;\n    return date;\n  }\n\n  setMonth(date: NgbDate, month: number): NgbDate {\n    month = +month;\n    date.year = date.year + Math.floor((month - 1) / 12);\n    date.month = Math.floor(((month - 1) % 12 + 12) % 12) + 1;\n    return date;\n  }\n\n  setYear(date: NgbDate, yearValue: number): NgbDate {\n    date.year = +yearValue;\n    return date;\n  }\n\n  abstract getWeekday(date: NgbDate): number;\n\n  abstract getNext(date: NgbDate, period?: NgbPeriod, number?: number): NgbDate;\n\n  abstract getPrev(date: NgbDate, period?: NgbPeriod, number?: number): NgbDate;\n\n  abstract getWeekNumber(week: NgbDate[], firstDayOfWeek: number): number;\n\n  abstract getToday(): NgbDate;\n\n  /**\n   * Returns the equivalent Hijri date value for a give input Gregorian date.\n   * `gDate` is s JS Date to be converted to Hijri.\n   */\n  abstract fromGregorian(gDate: Date): NgbDate;\n\n  /**\n   * Converts the current Hijri date to Gregorian.\n   */\n  abstract toGregorian(hijriDate: NgbDate): Date;\n\n  /**\n   * Returns the number of days in a specific Hijri month.\n   * `month` is 1 for Muharram, 2 for Safar, etc.\n   * `year` is any Hijri year.\n   */\n  abstract getDaysInIslamicMonth(month: number, year: number): number;\n\n  protected _isIslamicLeapYear(year: number): boolean { return (14 + 11 * year) % 30 < 11; }\n\n  /**\n   * Returns the start of Hijri Month.\n   * `month` is 0 for Muharram, 1 for Safar, etc.\n   * `year` is any Hijri year.\n   */\n  protected _getMonthStart(year: number, month: number): number {\n    return Math.ceil(29.5 * month) + (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0);\n  }\n\n  /**\n   * Returns the start of Hijri year.\n   * `year` is any Hijri year.\n   */\n  protected _getYearStart(year: number): number { return (year - 1) * 354 + Math.floor((3 + 11 * year) / 30.0); }\n}\n"]}