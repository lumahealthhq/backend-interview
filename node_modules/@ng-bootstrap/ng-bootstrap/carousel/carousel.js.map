{"version":3,"sources":["../../src/carousel/carousel.ts"],"names":[],"mappings":"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","file":"carousel.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Directive,\n  TemplateRef,\n  ContentChildren,\n  QueryList,\n  Input,\n  AfterContentChecked,\n  OnInit,\n  OnChanges,\n  OnDestroy,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport {NgbCarouselConfig} from './carousel-config';\n\nlet nextId = 0;\n\n/**\n * Represents an individual slide to be used within a carousel.\n */\n\nexport class NgbSlide {\n  /**\n   * Unique slide identifier. Must be unique for the entire document for proper accessibility support.\n   * Will be auto-generated if not provided.\n   */\n   id = `ngb-slide-${nextId++}`;\n  constructor(public tplRef: TemplateRef<any>) {}\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{selector: 'ng-template[ngbSlide]'}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: TemplateRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'id': [{ type: Input },],\n};\n}\n\n/**\n * Directive to easily create carousels based on Bootstrap's markup.\n */\n\nexport class NgbCarousel implements AfterContentChecked,\n    OnDestroy, OnInit, OnChanges {\n   slides: QueryList<NgbSlide>;\n  private _slideChangeInterval;\n\n  /**\n   * Amount of time in milliseconds before next slide is shown.\n   */\n   interval: number;\n\n  /**\n   * Whether can wrap from the last to the first slide.\n   */\n   wrap: boolean;\n\n  /**\n   * A flag for allowing navigation via keyboard\n   */\n   keyboard: boolean;\n\n  /**\n   * The active slide id.\n   */\n   activeId: string;\n\n  /**\n   * A carousel slide event fired when the slide transition is completed.\n   * See NgbSlideEvent for payload details\n   */\n   slide = new EventEmitter<NgbSlideEvent>();\n\n  constructor(config: NgbCarouselConfig) {\n    this.interval = config.interval;\n    this.wrap = config.wrap;\n    this.keyboard = config.keyboard;\n  }\n\n  ngAfterContentChecked() {\n    let activeSlide = this._getSlideById(this.activeId);\n    this.activeId = activeSlide ? activeSlide.id : (this.slides.length ? this.slides.first.id : null);\n  }\n\n  ngOnInit() { this._startTimer(); }\n\n  ngOnChanges(changes) {\n    if ('interval' in changes && !changes['interval'].isFirstChange()) {\n      this._restartTimer();\n    }\n  }\n\n  ngOnDestroy() { clearInterval(this._slideChangeInterval); }\n\n  /**\n   * Navigate to a slide with the specified identifier.\n   */\n  select(slideId: string) {\n    this.cycleToSelected(slideId, this._getSlideEventDirection(this.activeId, slideId));\n    this._restartTimer();\n  }\n\n  /**\n   * Navigate to the next slide.\n   */\n  prev() {\n    this.cycleToPrev();\n    this._restartTimer();\n  }\n\n  /**\n   * Navigate to the next slide.\n   */\n  next() {\n    this.cycleToNext();\n    this._restartTimer();\n  }\n\n  /**\n   * Stops the carousel from cycling through items.\n   */\n  pause() { this._stopTimer(); }\n\n  /**\n   * Restarts cycling through the carousel slides from left to right.\n   */\n  cycle() { this._startTimer(); }\n\n  cycleToNext() { this.cycleToSelected(this._getNextSlide(this.activeId), NgbSlideEventDirection.LEFT); }\n\n  cycleToPrev() { this.cycleToSelected(this._getPrevSlide(this.activeId), NgbSlideEventDirection.RIGHT); }\n\n  cycleToSelected(slideIdx: string, direction: NgbSlideEventDirection) {\n    let selectedSlide = this._getSlideById(slideIdx);\n    if (selectedSlide) {\n      if (selectedSlide.id !== this.activeId) {\n        this.slide.emit({prev: this.activeId, current: selectedSlide.id, direction: direction});\n      }\n      this.activeId = selectedSlide.id;\n    }\n  }\n\n  keyPrev() {\n    if (this.keyboard) {\n      this.prev();\n    }\n  }\n\n  keyNext() {\n    if (this.keyboard) {\n      this.next();\n    }\n  }\n\n  private _restartTimer() {\n    this._stopTimer();\n    this._startTimer();\n  }\n\n  private _startTimer() {\n    if (this.interval > 0) {\n      this._slideChangeInterval = setInterval(() => { this.cycleToNext(); }, this.interval);\n    }\n  }\n\n  private _stopTimer() { clearInterval(this._slideChangeInterval); }\n\n  private _getSlideById(slideId: string): NgbSlide {\n    let slideWithId: NgbSlide[] = this.slides.filter(slide => slide.id === slideId);\n    return slideWithId.length ? slideWithId[0] : null;\n  }\n\n  private _getSlideIdxById(slideId: string): number {\n    return this.slides.toArray().indexOf(this._getSlideById(slideId));\n  }\n\n  private _getNextSlide(currentSlideId: string): string {\n    const slideArr = this.slides.toArray();\n    const currentSlideIdx = this._getSlideIdxById(currentSlideId);\n    const isLastSlide = currentSlideIdx === slideArr.length - 1;\n\n    return isLastSlide ? (this.wrap ? slideArr[0].id : slideArr[slideArr.length - 1].id) :\n                         slideArr[currentSlideIdx + 1].id;\n  }\n\n  private _getPrevSlide(currentSlideId: string): string {\n    const slideArr = this.slides.toArray();\n    const currentSlideIdx = this._getSlideIdxById(currentSlideId);\n    const isFirstSlide = currentSlideIdx === 0;\n\n    return isFirstSlide ? (this.wrap ? slideArr[slideArr.length - 1].id : slideArr[0].id) :\n                          slideArr[currentSlideIdx - 1].id;\n  }\n\n  private _getSlideEventDirection(currentActiveSlideId: string, nextActiveSlideId: string): NgbSlideEventDirection {\n    const currentActiveSlideIdx = this._getSlideIdxById(currentActiveSlideId);\n    const nextActiveSlideIdx = this._getSlideIdxById(nextActiveSlideId);\n\n    return currentActiveSlideIdx > nextActiveSlideIdx ? NgbSlideEventDirection.RIGHT : NgbSlideEventDirection.LEFT;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'ngb-carousel',\n  exportAs: 'ngbCarousel',\n  host: {\n    'class': 'carousel slide',\n    '[style.display]': '\"block\"',\n    'tabIndex': '0',\n    '(mouseenter)': 'pause()',\n    '(mouseleave)': 'cycle()',\n    '(keydown.arrowLeft)': 'keyPrev()',\n    '(keydown.arrowRight)': 'keyNext()'\n  },\n  template: `\n    <ol class=\"carousel-indicators\">\n      <li *ngFor=\"let slide of slides\" [id]=\"slide.id\" [class.active]=\"slide.id === activeId\" \n          (click)=\"cycleToSelected(slide.id, _getSlideEventDirection(activeId, slide.id))\"></li>\n    </ol>\n    <div class=\"carousel-inner\">\n      <div *ngFor=\"let slide of slides\" class=\"carousel-item\" [class.active]=\"slide.id === activeId\">\n        <ng-template [ngTemplateOutlet]=\"slide.tplRef\"></ng-template>\n      </div>\n    </div>\n    <a class=\"carousel-control-prev\" role=\"button\" (click)=\"cycleToPrev()\">\n      <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n      <span class=\"sr-only\">Previous</span>\n    </a>\n    <a class=\"carousel-control-next\" role=\"button\" (click)=\"cycleToNext()\">\n      <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n      <span class=\"sr-only\">Next</span>\n    </a>\n    `\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgbCarouselConfig, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'slides': [{ type: ContentChildren, args: [NgbSlide, ] },],\n'interval': [{ type: Input },],\n'wrap': [{ type: Input },],\n'keyboard': [{ type: Input },],\n'activeId': [{ type: Input },],\n'slide': [{ type: Output },],\n};\n}\n\n/**\n* The payload of the slide event fired when the slide transition is completed\n*/\nexport interface NgbSlideEvent {\n  /**\n   * Previous slide id\n   */\n  prev: string;\n\n  /**\n   * New slide ids\n   */\n  current: string;\n\n  /**\n   * Slide event direction\n   */\n  direction: NgbSlideEventDirection;\n}\n\n/**\n * Enum to define the carousel slide event direction\n */\nexport enum NgbSlideEventDirection {\n  LEFT = <any>'left',\n  RIGHT = <any>'right'\n}\n\nexport const NGB_CAROUSEL_DIRECTIVES = [NgbCarousel, NgbSlide];\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}